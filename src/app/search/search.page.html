<ion-header>
  <div class="searchbox">
    <!-- <ion-searchbar [(ngModel)]="searchTerm" (search)="startSearch($event)" (ionBlur)="blur()" (ionCancel)="cancelSearch()" (ionFocus)="initSearch()" debounce=100 showCancelButton="focus" placeholder="输入关键字"></ion-searchbar> -->

    <!-- search drop down -->
    <ion-row style="background: white; text-align: center;">
        <ion-col>
          <div>
            <ion-select [(ngModel)]="workTypeSelect" placeholder="工作种类" name="work_type" interface="popover" (ionChange)="selectChange($event)">
                <ion-select-option [value]="opt.value" *ngFor="let opt of workTypeOpts">{{opt.display}}</ion-select-option>
            </ion-select>
          </div>
        </ion-col>
        <ion-col>
          <div>
            <ion-select [(ngModel)]="jobTypeSelect" placeholder="职业种类" name="job_cat" interface="popover" (ionChange)="selectChange($event)">
                <ion-select-option [value]="opt.value" *ngFor="let opt of jobTypeOpts">{{opt.display}}</ion-select-option>
            </ion-select>
          </div>
        </ion-col>
        <ion-col>
          <div>
            <ion-select [(ngModel)]="salarySelect" placeholder="时薪" name="salary" interface="popover" (ionChange)="selectChange($event)">
                <ion-select-option [value]="opt.value" *ngFor="let opt of salaryOpts">{{opt.display}}</ion-select-option>
            </ion-select>
          </div>
        </ion-col>
    </ion-row>
    <ion-button expand="full" #clearSelectBtn style="display:none" color="danger" (click)="clearSelect()">
      <label>清除搜索结果</label>
    </ion-button>
    <!-- <ion-range min="15" max="500" color="secondary" (ionChange)="searchByPay($event.detail.value)" dual-knobs pin value=250 debounce=1800 style="padding-top: 0;padding-bottom: 0;">
      <ion-icon slot="start" size="small" name="card"></ion-icon>
      <ion-icon slot="end" name="card"></ion-icon>
    </ion-range> -->
  </div>
</ion-header>

<ion-content> 
  <ion-refresher #refresh (ionRefresh)="refreshCard($event)" slot="fixed" pullMin=120>
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <div style="background-color: white" >
    
  <ion-card *ngFor="let j of jobs">
      <ion-grid>
        <div (click)="presentJobDetailModal(j)">
          <!-- Company name& avatar, plus post time -->
          <ion-row class="ion-justify-content-center">
            <ion-label style="color:  rgb(142, 171, 224);">{{j.publishDateTime}}</ion-label>
          </ion-row>
          <ion-row class="ion-align-items-center ion-justify-content-center">
            <ion-col size=2 offset=0.5>
              <ion-thumbnail style="width: 72px;height: 72px;">
                <!-- <img [src]='j.imageUrl[0]'> -->
                <img src="../../assets/cxk.jpg">
              </ion-thumbnail> 
            </ion-col>
            <ion-col size=6.5 offset=0.5>
              <ion-list>  
                <ion-item>
                  <ion-label class="ion-text-wrap ion-text-center"><b>{{j.title}}</b></ion-label>
                </ion-item>
                <ion-item lines="none">
                  <ion-label class="ion-text-wrap ion-text-center">{{j.position}}</ion-label>
                </ion-item>
              </ion-list>
            </ion-col>
            <ion-col size=2.5>
              <span style="color:goldenrod; font-size: 7; ">{{j.salary}}$/hr</span>
            </ion-col>
          </ion-row>
          <ion-item-divider style="min-height: 0; height: 5px;"></ion-item-divider>
          <!-- Job's description, start with a fav icon -->
          <ion-row class="ion-align-items-center" style="border-bottom-style: dotted; border-bottom-color: darkgray; padding-bottom: 3px;">
            <ion-label>{{j.introText}}</ion-label>
          </ion-row>
          <!-- Job's characteristics -->
          <ion-row>
            <ion-chip *ngFor="let tag of j.tags">{{tag}}</ion-chip>
          </ion-row>
          </div>
        <ion-button *ngIf="isLogged" [id]="j.jid" expand="block" (click)="changeFavJob($event.target)"><ion-spinner style="display: none;"></ion-spinner><ion-icon [name]="j.favIconName"></ion-icon></ion-button>

      </ion-grid>
  </ion-card>  

  </div>
  <form [formGroup]="this.commDbService.newJobForm">
    <ion-label>Position</ion-label>
    <ion-input placeholder="ID"
            formControlName="position"></ion-input><br/>
    <ion-label>Publish</ion-label>
    <ion-input placeholder="ID"
            formControlName="publishDateTime"
            type="date"></ion-input><br/>
    <ion-label>LastEdit</ion-label>
    <ion-input placeholder="ID"
            formControlName="lastEditDateTime"
            type="date"></ion-input><br/>
    <ion-label>ImageUrl</ion-label>            
    <ion-input placeholder="ImageUrl"
            formControlName="imageUrl"></ion-input><br/>
    <ion-label>Title</ion-label>
    <ion-input placeholder="Title"
            formControlName="title"></ion-input><br/>
    <ion-label>Salary</ion-label>
    <ion-input placeholder="Salary"
            formControlName="salary"
            type="number"></ion-input><br/>
    <ion-label>IntroText</ion-label>
    <ion-textarea placeholder="IntroText"
            formControlName="introText"></ion-textarea><br/>
    <ion-label>GeoLocation</ion-label>
    <ion-textarea placeholder="geolocation"
            formControlName="geolocation"></ion-textarea><br/>
    <ion-label>Tags, splited by ';'</ion-label>
    <ion-textarea placeholder="Tags (i.e. hello;bye)"
            formControlName="tags"></ion-textarea><br/>
    <ion-label>Details</ion-label>
    <ion-textarea placeholder="Details"
            formControlName="details"></ion-textarea><br/>
    <ion-button type="submit" expand="block" (click)="addJob()"><ion-icon name="add"></ion-icon></ion-button>
  </form>

</ion-content>

<ion-footer></ion-footer>